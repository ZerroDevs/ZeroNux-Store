<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="https://assets.zeronux.store/Logo.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ - Ù…ØªØ¬Ø± Ø²ÙŠØ±ÙˆÙ†ÙƒØ³</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Cairo:wght@400;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="Style/index.css">
    <link rel="stylesheet" href="Style/secondary.css">
    <style>
        /* Support Page Styles */
        .support-tabs {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-bottom: 2rem;
        }

        .support-tab-btn {
            padding: 10px 24px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.12);
            background: rgba(255, 255, 255, 0.04);
            color: rgba(255, 255, 255, 0.6);
            font-family: 'Cairo', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .support-tab-btn:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .support-tab-btn.active {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2));
            border-color: rgba(102, 126, 234, 0.4);
            color: #a5b4fc;
        }

        /* Ticket Form */
        .ticket-form-card {
            max-width: 600px;
            margin: 0 auto;
        }

        /* Ticket Notification Toast */
        .ticket-notif {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            padding: 14px 28px;
            border-radius: 12px;
            font-family: 'Cairo', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            z-index: 9999;
            transition: transform 0.3s ease;
            max-width: 90%;
            text-align: center;
        }

        .ticket-notif.show {
            transform: translateX(-50%) translateY(0);
        }

        .ticket-notif-success {
            background: linear-gradient(135deg, #4caf50, #2e7d32);
            color: white;
            box-shadow: 0 4px 20px rgba(76, 175, 80, 0.3);
        }

        .ticket-notif-error {
            background: linear-gradient(135deg, #f44336, #c62828);
            color: white;
            box-shadow: 0 4px 20px rgba(244, 67, 54, 0.3);
        }

        /* Tickets List */
        .ticket-card {
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 16px 20px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .ticket-card:hover {
            background: rgba(102, 126, 234, 0.08);
            border-color: rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
        }

        .ticket-card.ticket-unread {
            border-right: 3px solid #4caf50;
        }

        .ticket-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }

        .ticket-card-id {
            font-family: monospace;
            font-size: 0.8rem;
            color: #667eea;
            font-weight: 600;
        }

        .ticket-status {
            font-size: 0.7rem;
            padding: 3px 10px;
            border-radius: 12px;
            font-weight: 600;
        }

        .status-open {
            background: rgba(76, 175, 80, 0.15);
            color: #4caf50;
        }

        .status-replied {
            background: rgba(33, 150, 243, 0.15);
            color: #42a5f5;
        }

        .status-closed {
            background: rgba(255, 255, 255, 0.08);
            color: rgba(255, 255, 255, 0.4);
        }

        .ticket-card-subject {
            font-size: 0.95rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 4px;
        }

        .ticket-card-preview {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.4);
            line-height: 1.4;
        }

        .ticket-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
        }

        .ticket-card-date {
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.3);
        }

        .ticket-has-reply {
            font-size: 0.7rem;
            color: #4caf50;
            font-weight: 600;
        }

        .ticket-empty,
        .ticket-loading {
            text-align: center;
            padding: 3rem;
            color: rgba(255, 255, 255, 0.3);
            font-size: 0.9rem;
        }

        /* Chat View */
        .chat-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            margin-bottom: 1rem;
        }

        .chat-back-btn {
            padding: 6px 14px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            background: transparent;
            color: rgba(255, 255, 255, 0.6);
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .chat-back-btn:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .chat-header-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chat-ticket-id {
            font-family: monospace;
            font-size: 0.85rem;
            color: #667eea;
            font-weight: 600;
        }

        .chat-subject {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.4);
            margin-bottom: 1rem;
        }

        .chat-messages {
            max-height: 400px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 10px 0;
            margin-bottom: 1rem;
        }

        .chat-msg {
            max-width: 80%;
            padding: 10px 16px;
            border-radius: 14px;
            font-size: 0.85rem;
            line-height: 1.5;
        }

        .chat-msg-customer {
            align-self: flex-start;
            background: rgba(255, 255, 255, 0.06);
            color: rgba(255, 255, 255, 0.85);
            border-bottom-right-radius: 4px;
        }

        .chat-msg-admin {
            align-self: flex-end;
            background: rgba(102, 126, 234, 0.2);
            color: #c5ceff;
            border-bottom-left-radius: 4px;
        }

        .chat-msg-sender {
            font-size: 0.7rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.4);
            margin-bottom: 4px;
        }

        .chat-msg-admin .chat-msg-sender {
            color: #667eea;
        }

        .chat-msg-text {
            word-wrap: break-word;
        }

        .chat-msg-time {
            font-size: 0.65rem;
            color: rgba(255, 255, 255, 0.25);
            margin-top: 4px;
        }

        .chat-input-area {
            display: flex;
            gap: 8px;
        }

        .chat-input-area textarea {
            flex: 1;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: white;
            padding: 10px 14px;
            font-family: 'Cairo', sans-serif;
            font-size: 0.85rem;
            resize: none;
        }

        .chat-input-area textarea:focus {
            outline: none;
            border-color: rgba(102, 126, 234, 0.4);
        }

        .chat-send-btn {
            padding: 10px 24px !important;
            min-width: auto !important;
        }

        .chat-closed-notice {
            text-align: center;
            padding: 1rem;
            color: rgba(255, 255, 255, 0.3);
            font-size: 0.85rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <div id="main-header"></div>
    <script src="Scripts/header.js"></script>
    <script src="Scripts/global-search.js"></script>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <!-- Shared Firebase Config -->
    <script src="Scripts/firebase-config.js"></script>
    <script src="Scripts/cart.js"></script>
    <script src="Scripts/user-profile.js"></script>

    <header class="page-header">
        <div class="container">
            <h1 class="page-title">ğŸ› ï¸ Ù…Ø±ÙƒØ² Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</h1>
            <p class="page-subtitle">Ù†Ø­Ù† Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ. Ø£Ø±Ø³Ù„ ØªØ°ÙƒØ±Ø© ÙˆØ³Ù†Ø±Ø¯ Ø¹Ù„ÙŠÙƒ ÙÙŠ Ø£Ù‚Ø±Ø¨ ÙˆÙ‚Øª.</p>
        </div>
    </header>

    <main class="secondary-container">
        <!-- Support Grid (Quick Links) -->
        <div class="support-grid">
            <a href="https://wa.me/218916808225" target="_blank" class="support-card">
                <span class="support-icon">ğŸ’¬</span>
                <h3>ÙˆØ§ØªØ³Ø§Ø¨</h3>
                <p>ØªÙˆØ§ØµÙ„ Ù…Ø¨Ø§Ø´Ø± ÙˆØ³Ø±ÙŠØ¹</p>
            </a>
            <a href="mailto:support@zeronux.store" class="support-card">
                <span class="support-icon">ğŸ“§</span>
                <h3>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h3>
                <p>support@zeronux.store</p>
            </a>
            <a href="faq.html" class="support-card">
                <span class="support-icon">â“</span>
                <h3>Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</h3>
                <p>Ø¥Ø¬Ø§Ø¨Ø§Øª Ø³Ø±ÙŠØ¹Ø©</p>
            </a>
        </div>

        <!-- Tab Switcher -->
        <div class="support-tabs">
            <button class="support-tab-btn active" data-view="new-ticket" onclick="switchSupportView('new-ticket')">ğŸ“
                ØªØ°ÙƒØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
            <button class="support-tab-btn" data-view="my-tickets" onclick="switchSupportView('my-tickets')">ğŸ“‹
                ØªØ°Ø§ÙƒØ±ÙŠ</button>
        </div>

        <!-- New Ticket Form -->
        <div id="new-ticket-view">
            <div class="glass-card contact-form-container ticket-form-card">
                <h2 style="margin-bottom: 2rem; color: #fff; text-align: center;">ğŸ“ Ø£Ø±Ø³Ù„ ØªØ°ÙƒØ±Ø© Ø¯Ø¹Ù…</h2>
                <form onsubmit="event.preventDefault(); submitSupportTicket();">
                    <div class="form-input-group">
                        <label>Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ *</label>
                        <input type="text" class="form-input" id="ticket-name" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…" required>
                    </div>
                    <div class="form-input-group">
                        <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *</label>
                        <input type="text" class="form-input" id="ticket-contact" placeholder="ÙˆØ³ÙŠÙ„Ø© Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ"
                            required>
                    </div>
                    <div class="form-input-group">
                        <label>Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø±Ø³Ø§Ù„Ø©</label>
                        <select class="form-input" id="ticket-subject">
                            <option>Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ø§Ù…</option>
                            <option>Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø·Ù„Ø¨</option>
                            <option>Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø¯ÙØ¹</option>
                            <option>Ø·Ù„Ø¨ Ø§Ø³ØªØ±Ø¬Ø§Ø¹</option>
                            <option>Ø§Ù‚ØªØ±Ø§Ø­</option>
                            <option>Ø£Ø®Ø±Ù‰</option>
                        </select>
                    </div>
                    <div class="form-input-group">
                        <label>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© *</label>
                        <textarea class="form-input" id="ticket-message" placeholder="Ø§Ø´Ø±Ø­ Ù„Ù†Ø§ ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ..."
                            required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary" id="ticket-submit-btn"
                        style="width: 100%; justify-content: center;">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ°ÙƒØ±Ø© ğŸš€</button>
                </form>
            </div>
        </div>

        <!-- My Tickets List -->
        <div id="my-tickets-view" style="display: none;">
            <div class="glass-card" style="max-width: 700px; margin: 0 auto;">
                <h2 style="margin-bottom: 1.5rem; color: #fff; text-align: center;">ğŸ“‹ ØªØ°Ø§ÙƒØ±ÙŠ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</h2>
                <div id="my-tickets-list">
                    <div class="ticket-loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
                </div>
            </div>
        </div>

        <!-- Ticket Chat View (shown when clicking a ticket) -->
        <div id="ticket-chat-view" style="display: none;">
            <div class="glass-card" style="max-width: 700px; margin: 0 auto;">
                <!-- Populated dynamically by support.js -->
            </div>
        </div>
    </main>

    <!-- Footer -->
    <div id="main-footer"></div>
    <script src="Scripts/footer.js"></script>
    <script src="Scripts/user-profile.js"></script>
    <script src="Scripts/support.js"></script>
    <script src="Scripts/instant-page.js" type="module"></script>
    <script src="Scripts/smart-search.js"></script>
    <script src="Scripts/pwa.js"></script>
</body>

</html>